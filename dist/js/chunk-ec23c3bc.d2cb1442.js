(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec23c3bc"],{4462:function(t,e,o){"use strict";o("5500")},"456d":function(t,e,o){var n=o("4bf8"),s=o("0d58");o("5eda")("keys",(function(){return function(t){return s(n(t))}}))},5500:function(t,e,o){},"5eda":function(t,e,o){var n=o("5ca1"),s=o("8378"),i=o("79e5");t.exports=function(t,e){var o=(s.Object||{})[t]||Object[t],a={};a[t]=e(o),n(n.S+n.F*i((function(){o(1)})),"Object",a)}},ba93:function(t,e,o){"use strict";var n,s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"lost-item"}},[0!=Object.keys(t.lostFounditem).length?o("div",[o("ul",{staticClass:"lost-item-ul"},[o("li",{staticClass:"li-one"},[o("img",{staticClass:"user-avatar",attrs:{src:t.lostFounditem.author.avatarUrl}})]),o("li",[o("p",{staticClass:"user-name"},[t._v(t._s(t.lostFounditem.author.name))]),o("p",{staticClass:"user-time"},[o("span",{staticStyle:{color:"silver"}},[t._v(t._s(t.lostFounditem.createTime))])])]),o("li"),o("li",[o("van-popover",{attrs:{trigger:"click",actions:t.actions},on:{select:t.onSelect},scopedSlots:t._u([{key:"reference",fn:function(){return[o("van-icon",{attrs:{name:"ellipsis",size:"30"}})]},proxy:!0}],null,!1,2193866066),model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}})],1)]),o("p",{directives:[{name:"show",rawName:"v-show",value:null!=t.lostFounditem.telphone,expression:"lostFounditem.telphone != null"}],staticClass:"phone"},[o("span",[o("van-icon",{attrs:{name:"phone-circle-o",color:"#00ac2c"}})],1),o("span",[t._v("  "+t._s(t.lostFounditem.telphone)+" ")]),t.isShowCopyPhone?o("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.lostFounditem.telphone,expression:"lostFounditem.telphone",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"copy-phone"},[t._v("一键复制号码")]):t._e()]),o("p",{directives:[{name:"show",rawName:"v-show",value:null!=t.lostFounditem.findTime,expression:"lostFounditem.findTime != null"}],staticClass:"phone"},[o("span",[o("van-icon",{attrs:{name:"underway-o",color:"#00ac2c"}})],1),o("span",[t._v("  "+t._s(t.lostFounditem.findTime)+" ")])]),o("p",{directives:[{name:"show",rawName:"v-show",value:null!=t.lostFounditem.place,expression:"lostFounditem.place != null"}],staticClass:"phone"},[o("span",[o("van-icon",{attrs:{name:"location-o",color:"#00ac2c"}})],1),o("span",[t._v("  "+t._s(t.lostFounditem.place)+" ")])]),o("p",{staticClass:"descript"},[t._v("\n            "+t._s(t.lostFounditem.content)+"\n        ")]),o("ul",{directives:[{name:"show",rawName:"v-show",value:null!=t.lostFounditem.images,expression:"lostFounditem.images != null"}],staticClass:"lost-imaes"},t._l(t.lostFounditem.images,(function(e,n){return o("li",{key:n,on:{click:function(e){return t.getComment(n)}}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"image"}]})])})),0),o("div",[t.isShowItem?o("div",{staticClass:"commentcount"},[o("div",{staticClass:"precomment"}),o("div",[0!=t.lostFoundItemComments?o("span",[t._v("全部评论 ("+t._s(t.CommentsLength)+")")]):o("span",[t._v("全部评论 (0)")])]),o("ul",{directives:[{name:"show",rawName:"v-show",value:0!=t.CommentsLength,expression:"CommentsLength != 0"}]},t._l(t.mainArr,(function(e,n){return 0!=t.mainArr.length?o("li",{key:n,staticClass:"border-comments van-hairline--top"},[o("ul",{staticClass:"lost-item-comments"},[o("li",{staticClass:"li-one"},[o("img",{staticClass:"user-avatar",attrs:{src:e.user.avatarUrl}})]),o("li",[o("p",{staticClass:"user-name",staticStyle:{"font-size":"16px"}},[t._v("\n                                    "+t._s(e.user.name)+"\n                                ")]),o("p",{staticStyle:{"font-size":"14px"},on:{click:function(e){return t.reply0(n)}}},[t._v("\n                                    "+t._s(e.content)+"\n                                ")]),o("p",{staticClass:"user-time"},[o("span",{staticStyle:{color:"silver"}},[t._v(t._s(e.updateTime))])]),o("div",{staticClass:"comment-item",staticStyle:{"font-size":"14px"}},t._l(t.commentArr[n],(function(e,s){return t.commentArr[n].length>0?o("p",{key:s,on:{click:function(e){return t.reply(n,s)}}},[t._v("\n                                        "+t._s(t.commentArr[n][s][0].user.name)+"\n                                        "),o("span",{staticStyle:{color:"#00ac2c"}},[t._v("回复")]),t._v("\n                                        "+t._s(t.commentArr[n][s][1].user.name)+": "+t._s(t.commentArr[n][s][0].content)+"\n\n                                        "),o("br"),o("a",{staticClass:"user-time"},[o("span",{staticStyle:{color:"silver"}},[t._v(t._s(t.commentArr[n][s][0].updateTime))])])]):t._e()})),0)])])]):t._e()})),0)]):o("ul",{staticClass:"comment"},[o("li"),o("li",[o("p",{staticClass:"phone"},[o("span",[o("van-icon",{attrs:{name:"comment-o",size:"25px"},on:{click:t.getComment}})],1),t._v(" \n                        "),o("span",[t._v(t._s(t.CommentsLength))])])]),o("li"),o("li",{staticClass:"phone-detail",on:{click:t.getComment}},[o("span",[t._v("点击查看详情>>>")])])])])]):t._e(),o("van-overlay",{staticClass:"father-wrapper",attrs:{show:t.show},on:{click:function(e){t.show=!1}}},[o("div",{staticClass:"wrapper",on:{click:function(t){t.stopPropagation()}}},[o("div",{staticClass:"block"},[o("p",[t._v("用户操作")]),o("p",{on:{click:t.itemReply}},[t._v("\n                    "+t._s(t.revert)+"\n                    "),o("span",{staticStyle:{color:"#00ac2c"}},[t._v(" "+t._s(t.replymen))])]),o("p",{on:{click:t.itemDelete}},[t._v("删除")]),o("p",{on:{click:t.itemNew}},[t._v(t._s(t.changed))])])])]),o("van-action-sheet",{attrs:{title:t.theTitle,"get-container":"body"},model:{value:t.isshowreply,callback:function(e){t.isshowreply=e},expression:"isshowreply"}},[o("div",{staticClass:"content"},[o("van-field",{attrs:{rows:"1",autosize:"",type:"textarea",placeholder:t.placeholder},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),o("van-button",{staticClass:"btn",attrs:{type:"primary",block:"",color:"#00ac2c"},on:{click:function(e){return t.commentAxios(t.indexComment)}}},[t._v("发送")])],1)]),o("van-search",{attrs:{"left-icon":"",placeholder:"请输入您的评论"},on:{click:t.commentDongtai},model:{value:t.DongtaiContent,callback:function(e){t.DongtaiContent=e},expression:"DongtaiContent"}})],1)},i=[],a=(o("96cf"),o("1da1")),l=(o("ac6a"),o("456d"),o("ade3")),c=(o("4662"),o("28a2")),m=(o("5852"),o("d961")),r=(o("66b9"),o("b650")),h=(o("be7f"),o("565f")),u=(o("2cbd"),o("ab2c")),d=(o("f1dc"),o("6e47")),p=(o("4056"),o("44bf")),g=(o("c3a6"),o("ad06")),v=(o("7f7f"),o("d82d"),o("7278")),f=o("90b9"),C=o("04b3"),F=o.n(C),w={name:"LostItem",components:(n={},Object(l["a"])(n,v["a"].name,v["a"]),Object(l["a"])(n,g["a"].name,g["a"]),Object(l["a"])(n,p["a"].name,p["a"]),Object(l["a"])(n,d["a"].name,d["a"]),Object(l["a"])(n,u["a"].name,u["a"]),Object(l["a"])(n,h["a"].name,h["a"]),Object(l["a"])(n,r["a"].name,r["a"]),Object(l["a"])(n,m["a"].name,m["a"]),Object(l["a"])(n,c["a"].Component.name,c["a"].Component),n),props:{lostFounditem:{type:Object,default:function(){return{}}}},data:function(){return{DongtaiContent:"",images:["https://img01.yzcdn.cn/vant/apple-1.jpg","https://img01.yzcdn.cn/vant/apple-2.jpg"],closeIcon:F.a,isShowItem:!0,showPopover:!1,actions:[{text:"删除",icon:"cross"}],mainArr:[],commentArr:[],index:0,changed:"修改",revert:"回复",theTitle:"标题",show:!1,isshowreply:!1,replymen:"",commentId:"",placeholder:"请输入内容",message:"",indexComment:"3",items:{},forArr:{},lostFoundItemId:"",CommentsLength:"0",lostFoundItemComments:[],isShowCopyPhone:!1}},computed:{themainArr:function(){var t=this.lostFounditem.comments.filter((function(t,e){return console.log(t+e),t.commentId=null}));return t}},watch:{lostFounditem:{immediate:!0,deep:!0,handler:function(t){this.items=t}},$route:{handler:function(t){console.log(t.path),"/lostFoundItem"==t.path&&(this.isShowCopyPhone=!0)},immediate:!0}},created:function(){this.isShowItem=this.$route.query.isShowItem,console.log("created处"),console.log(this.lostFounditem),console.log(this.lostFounditem.id),this.lostFounditem.id&&(this.lostFoundItemId=this.lostFounditem.id,this.getCommentsById(this.lostFounditem.id)),console.log(0!=Object.keys(this.lostFounditem).length),"/lostFoundItem"==this.$route.path?this.isShowCopyPhone=!0:this.isShowCopyPhone=!1},mounted:function(){console.log(this.lostFounditem),console.log(this.lostFounditem.comments)},methods:{getCommentsById:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var o,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),o="/comment?lostFoundId="+e,t.next=4,this.$axios.get(o).then((function(t){console.log("来到了二次修改评论获取数据的方式"),console.log(t.data),console.log(t.data.length),n.lostFoundItemComments=t.data,n.lostFoundItemComments.forEach((function(t){t.updateTime=Object(f["a"])(t.updateTime)})),n.commentGOhome1()})).catch((function(t){console.log(t)}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),commentGOhome1:function(){var t=this;if(console.log("正在更新数据中"),console.log(this.lostFoundItemComments),this.mainArr=[],this.commentArr=[],0!=this.lostFoundItemComments.length&&null!=this.lostFoundItemComments&&void 0!=this.lostFoundItemComments){var e=this.lostFoundItemComments.filter((function(t,e){return console.log(t.commentId),null==t.commentId}));this.mainArr=e,console.log(this.mainArr),this.CommentsLength=this.mainArr.length;var o=this.lostFoundItemComments,n=this;this.mainArr.forEach((function(e,s){if(e.id,console.log(e),console.log(n.commentArr.length,n.mainArr.length),n.commentArr.length<=n.mainArr.length){var i=[];n.commentArr.push(i);var a=[];r(e);var l=t.lostFoundItemComments.filter((function(t){return null!=t.commentId})),c=[],m=a;h(m)}function r(t){0!=o.length&&o.forEach((function(e,o){if(e.commentId==t.id){console.log(e);var i=[];i.push(e),i.push(t),console.log(i),n.commentArr[s].push(i),a.push(e),n.CommentsLength=n.CommentsLength+1}}))}function h(t){0!=t.length&&(c=[],t.forEach((function(t){l.forEach((function(e){if(e.commentId==t.id){console.log(e),c.push(e);var o=[];o.push(e),o.push(t),n.commentArr[s].push(o),n.CommentsLength=n.CommentsLength+1}}))})),h(c))}})),console.log(this.CommentsLength),console.log(this.commentArr)}},getComment:function(t){"/lostFoundItem"==this.$route.path?Object(c["a"])({images:this.lostFounditem.images,startPosition:t,showIndicators:!0,closeable:!0,closeIcon:this.closeIcon}):this.$router.push({path:"/lostFoundItem",query:{id:this.lostFounditem.id,isShowItem:!1}})},onSelect:function(t){var e=this;switch(t.text){case this.actions[0].text:console.log(this.lostFounditem.id);var o="/lostFound/"+this.lostFounditem.id;this.$axios.delete(o).then((function(t){console.log(t),console.log(t.data.message);var o=t.data.message;e.$toast({message:o,position:"top"}),200==t.data.status&&e.$root.Bus.$emit("getItemList",e.lostFounditem.id)})).catch((function(t){console.log(t)}));break;case this.actions[1].text:this.$toast(this.actions[1].text);break;default:this.$toast(t.text)}},reply:function(t,e){this.show=!0,console.log(this.lostFounditem.id),console.log(this.commentArr[t][e][0].id),this.commentId=this.commentArr[t][e][0].id,this.replymen=this.commentArr[t][e][0].user.name,console.log(this.replymen)},reply0:function(t){this.show=!0,console.log(this.lostFounditem.id),console.log(this.mainArr[t].id),this.commentId=this.mainArr[t].id,this.replymen=this.mainArr[t].user.name,console.log(this.mainArr[t].user.name)},itemReply:function(){console.log("2222"),this.show=!1,this.theTitle=this.revert,this.placeholder="回复"+this.replymen+":",this.indexComment="1",this.isshowreply=!0},itemDelete:function(){var t=this;console.log("333"),console.log(this.commentId),this.show=!1;var e=this,o="/comment/"+e.commentId;this.$axios.delete(o).then((function(o){console.log(o.data),e.$toast({message:o.data.message,position:"center"}),t.$root.Bus.$emit("getcommentNew",e.lostFounditem.id),console.log(t.lostFounditem.id),t.getCommentsById(t.lostFounditem.id)})).catch((function(t){console.log(t)}))},itemNew:function(){console.log("444"),this.show=!1,this.theTitle=this.changed,this.placeholder="请输入修改的内容",this.indexComment="2",this.isshowreply=!0},commentAxios:function(t){var e=this;if(1==t){console.log("1"+t);var o=this,n="/comment/"+o.commentId+"/reply";this.$axios.post(n,{lostFoundId:o.lostFounditem.id,content:o.message}).then((function(t){console.log(t.data),o.$toast({message:t.data.message,position:"center"}),console.log(e.lostFounditem.id),e.getCommentsById(e.lostFounditem.id)})).catch((function(t){console.log(t)}))}else if(2==t){console.log("2"+t),console.log(this.commentId);var s="/comment/"+this.commentId;this.$axios.patch(s,{content:this.message}).then((function(t){console.log(t.data),e.$toast({message:t.data.message,position:"center"}),console.log(e.lostFounditem.id),e.getCommentsById(e.lostFounditem.id)})).catch((function(t){console.log(t)}))}else console.log(t),this.$axios.post("/comment",{lostFoundId:this.lostFounditem.id,content:this.message}).then((function(t){console.log(t.data),e.$toast({message:t.data.message,position:"center"}),console.log(e.lostFounditem.id),e.getCommentsById(e.lostFounditem.id)})).catch((function(t){console.log(t)}));this.isshowreply=!1},commentDongtai:function(){this.theTitle="评论",this.placeholder="请输入您的评论",this.indexComment="3",this.isshowreply=!0},onCopy:function(t){this.$toast({message:"已成功复制！",position:"center"})},onError:function(t){this.$toast({message:"失败"+t+"!",position:"center"})}}},y=w,I=(o("4462"),o("2877")),_=Object(I["a"])(y,s,i,!1,null,"0a0a04d8",null);e["a"]=_.exports}}]);
//# sourceMappingURL=chunk-ec23c3bc.d2cb1442.js.map